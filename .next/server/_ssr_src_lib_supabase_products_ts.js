"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_supabase_products_ts";
exports.ids = ["_ssr_src_lib_supabase_products_ts"];
exports.modules = {

/***/ "(ssr)/./src/lib/supabase/products.ts":
/*!**************************************!*\
  !*** ./src/lib/supabase/products.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchProductById: () => (/* binding */ fetchProductById),\n/* harmony export */   fetchProducts: () => (/* binding */ fetchProducts)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ \"(ssr)/./src/lib/supabase/client.ts\");\n/* __next_internal_client_entry_do_not_use__ fetchProducts,fetchProductById auto */ \n/**\n * Fetch all products with their current prices\n * @param productType Optional filter by product type (wine/liquor/merchandise)\n * @param onlyAvailable If true, only return products with availability = 'in_stock'\n */ async function fetchProducts(productType, onlyAvailable = true) {\n    // Ensure we're in the browser environment\n    if (true) {\n        console.error('fetchProducts can only be called from client components');\n        return [];\n    }\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n    try {\n        // First, get products without nested select to avoid issues\n        let query = supabase.from('products').select('*');\n        // Filter by product type if specified\n        if (productType) {\n            query = query.eq('product_type', productType);\n        }\n        // Filter by availability if requested\n        if (onlyAvailable) {\n            query = query.eq('availability', 'in_stock');\n        }\n        // Execute query\n        const { data, error } = await query.order('name');\n        if (error) {\n            console.error('Error fetching products:', error);\n            console.error('Error details:', JSON.stringify(error, null, 2));\n            throw error;\n        }\n        if (!data || data.length === 0) {\n            console.warn('No data returned from products query');\n            return [];\n        }\n        console.log(`Fetched ${data.length} products from database`);\n        // Now fetch prices separately for products that have them\n        const productIds = data.map((p)=>p.id);\n        const { data: pricesData } = await supabase.from('product_prices').select('*').in('product_id', productIds);\n        // Create a map of product_id -> prices\n        const priceMap = new Map();\n        if (pricesData) {\n            pricesData.forEach((price)=>{\n                if (!priceMap.has(price.product_id)) {\n                    priceMap.set(price.product_id, []);\n                }\n                priceMap.get(price.product_id).push(price);\n            });\n        }\n        // Process the data to get current prices\n        const productsWithPrices = data.map((product)=>{\n            // Get prices for this product\n            const prices = priceMap.get(product.id) || [];\n            const now = new Date();\n            // Find the current valid price (valid_from <= now AND (valid_to IS NULL OR valid_to >= now))\n            const currentPrice = prices.length > 0 ? prices.filter((price)=>{\n                if (!price.valid_from) return false;\n                const validFrom = new Date(price.valid_from);\n                const validTo = price.valid_to ? new Date(price.valid_to) : null;\n                return validFrom <= now && (!validTo || validTo >= now);\n            }).sort((a, b)=>{\n                // Sort by valid_from descending to get the most recent\n                return new Date(b.valid_from).getTime() - new Date(a.valid_from).getTime();\n            })[0] : null;\n            return {\n                id: product.id,\n                name: product.name,\n                description: product.description,\n                product_type: product.product_type,\n                supplier_id: product.supplier_id,\n                image_url: product.image_url,\n                abv: product.abv,\n                volume_ml: product.volume_ml,\n                stock_quantity: product.stock_quantity,\n                availability: product.availability,\n                created_at: product.created_at,\n                price: currentPrice?.price || null,\n                currency: currentPrice?.currency || 'SEK'\n            };\n        });\n        console.log(`Processed ${productsWithPrices.length} products with prices`);\n        return productsWithPrices;\n    } catch (error) {\n        console.error('Error in fetchProducts:', error);\n        throw error;\n    }\n}\n/**\n * Fetch a single product by ID with current price\n */ async function fetchProductById(productId) {\n    // Ensure we're in the browser environment\n    if (true) {\n        console.error('fetchProductById can only be called from client components');\n        return null;\n    }\n    const supabase = (0,_client__WEBPACK_IMPORTED_MODULE_0__.createClient)();\n    try {\n        const { data, error } = await supabase.from('products').select(`\n        *,\n        product_prices (\n          price,\n          currency,\n          valid_from,\n          valid_to\n        )\n      `).eq('id', productId).single();\n        if (error) {\n            console.error('Error fetching product:', error);\n            return null;\n        }\n        if (!data) {\n            return null;\n        }\n        const product = data;\n        // Get the most recent valid price\n        const prices = product.product_prices || [];\n        const now = new Date();\n        const currentPrice = prices.filter((price)=>{\n            const validFrom = new Date(price.valid_from);\n            const validTo = price.valid_to ? new Date(price.valid_to) : null;\n            return validFrom <= now && (!validTo || validTo >= now);\n        }).sort((a, b)=>{\n            return new Date(b.valid_from).getTime() - new Date(a.valid_from).getTime();\n        })[0];\n        return {\n            id: product.id,\n            name: product.name,\n            description: product.description,\n            product_type: product.product_type,\n            supplier_id: product.supplier_id,\n            image_url: product.image_url,\n            abv: product.abv,\n            volume_ml: product.volume_ml,\n            stock_quantity: product.stock_quantity,\n            availability: product.availability,\n            created_at: product.created_at,\n            price: currentPrice?.price || null,\n            currency: currentPrice?.currency || 'SEK'\n        };\n    } catch (error) {\n        console.error('Error in fetchProductById:', error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWotdjEvc3JjL2xpYi9zdXBhYmFzZS9wcm9kdWN0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJy4vY2xpZW50JztcblxuLy8gRXhwb3J0IHR5cGUgc2VwYXJhdGVseSB0byBhdm9pZCBTU1IgaXNzdWVzXG5leHBvcnQgdHlwZSBQcm9kdWN0V2l0aFByaWNlID0ge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsO1xuICBwcm9kdWN0X3R5cGU6ICd3aW5lJyB8ICdsaXF1b3InIHwgJ21lcmNoYW5kaXNlJztcbiAgc3VwcGxpZXJfaWQ6IHN0cmluZyB8IG51bGw7XG4gIGltYWdlX3VybDogc3RyaW5nIHwgbnVsbDtcbiAgYWJ2OiBudW1iZXIgfCBudWxsO1xuICB2b2x1bWVfbWw6IG51bWJlciB8IG51bGw7XG4gIHN0b2NrX3F1YW50aXR5OiBudW1iZXI7XG4gIGF2YWlsYWJpbGl0eTogJ2luX3N0b2NrJyB8ICdvdXRfb2Zfc3RvY2snO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHByaWNlOiBudW1iZXIgfCBudWxsO1xuICBjdXJyZW5jeTogc3RyaW5nO1xufTtcblxuaW50ZXJmYWNlIFByb2R1Y3RQcmljZSB7XG4gIHByaWNlOiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIHZhbGlkX2Zyb206IHN0cmluZztcbiAgdmFsaWRfdG86IHN0cmluZyB8IG51bGw7XG59XG5cbmludGVyZmFjZSBQcm9kdWN0V2l0aFByaWNlc1JhdyB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZyB8IG51bGw7XG4gIHByb2R1Y3RfdHlwZTogJ3dpbmUnIHwgJ2xpcXVvcicgfCAnbWVyY2hhbmRpc2UnO1xuICBzdXBwbGllcl9pZDogc3RyaW5nIHwgbnVsbDtcbiAgaW1hZ2VfdXJsOiBzdHJpbmcgfCBudWxsO1xuICBhYnY6IG51bWJlciB8IG51bGw7XG4gIHZvbHVtZV9tbDogbnVtYmVyIHwgbnVsbDtcbiAgc3RvY2tfcXVhbnRpdHk6IG51bWJlcjtcbiAgYXZhaWxhYmlsaXR5OiAnaW5fc3RvY2snIHwgJ291dF9vZl9zdG9jayc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbiAgcHJvZHVjdF9wcmljZXM6IFByb2R1Y3RQcmljZVtdO1xufVxuXG4vKipcbiAqIEZldGNoIGFsbCBwcm9kdWN0cyB3aXRoIHRoZWlyIGN1cnJlbnQgcHJpY2VzXG4gKiBAcGFyYW0gcHJvZHVjdFR5cGUgT3B0aW9uYWwgZmlsdGVyIGJ5IHByb2R1Y3QgdHlwZSAod2luZS9saXF1b3IvbWVyY2hhbmRpc2UpXG4gKiBAcGFyYW0gb25seUF2YWlsYWJsZSBJZiB0cnVlLCBvbmx5IHJldHVybiBwcm9kdWN0cyB3aXRoIGF2YWlsYWJpbGl0eSA9ICdpbl9zdG9jaydcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUHJvZHVjdHMoXG4gIHByb2R1Y3RUeXBlPzogJ3dpbmUnIHwgJ2xpcXVvcicgfCAnbWVyY2hhbmRpc2UnLFxuICBvbmx5QXZhaWxhYmxlOiBib29sZWFuID0gdHJ1ZVxuKTogUHJvbWlzZTxQcm9kdWN0V2l0aFByaWNlW10+IHtcbiAgLy8gRW5zdXJlIHdlJ3JlIGluIHRoZSBicm93c2VyIGVudmlyb25tZW50XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2ZldGNoUHJvZHVjdHMgY2FuIG9ubHkgYmUgY2FsbGVkIGZyb20gY2xpZW50IGNvbXBvbmVudHMnKTtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xuXG4gIHRyeSB7XG4gICAgLy8gRmlyc3QsIGdldCBwcm9kdWN0cyB3aXRob3V0IG5lc3RlZCBzZWxlY3QgdG8gYXZvaWQgaXNzdWVzXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9kdWN0cycpXG4gICAgICAuc2VsZWN0KCcqJyk7XG5cbiAgICAvLyBGaWx0ZXIgYnkgcHJvZHVjdCB0eXBlIGlmIHNwZWNpZmllZFxuICAgIGlmIChwcm9kdWN0VHlwZSkge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgncHJvZHVjdF90eXBlJywgcHJvZHVjdFR5cGUpO1xuICAgIH1cblxuICAgIC8vIEZpbHRlciBieSBhdmFpbGFiaWxpdHkgaWYgcmVxdWVzdGVkXG4gICAgaWYgKG9ubHlBdmFpbGFibGUpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2F2YWlsYWJpbGl0eScsICdpbl9zdG9jaycpO1xuICAgIH1cblxuICAgIC8vIEV4ZWN1dGUgcXVlcnlcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeS5vcmRlcignbmFtZScpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9kdWN0czonLCBlcnJvcik7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIEpTT04uc3RyaW5naWZ5KGVycm9yLCBudWxsLCAyKSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gZGF0YSByZXR1cm5lZCBmcm9tIHByb2R1Y3RzIHF1ZXJ5Jyk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYEZldGNoZWQgJHtkYXRhLmxlbmd0aH0gcHJvZHVjdHMgZnJvbSBkYXRhYmFzZWApO1xuXG4gICAgLy8gTm93IGZldGNoIHByaWNlcyBzZXBhcmF0ZWx5IGZvciBwcm9kdWN0cyB0aGF0IGhhdmUgdGhlbVxuICAgIGNvbnN0IHByb2R1Y3RJZHMgPSAoZGF0YSBhcyBhbnlbXSkubWFwKHAgPT4gcC5pZCk7XG4gICAgY29uc3QgeyBkYXRhOiBwcmljZXNEYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RfcHJpY2VzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmluKCdwcm9kdWN0X2lkJywgcHJvZHVjdElkcyk7XG5cbiAgICAvLyBDcmVhdGUgYSBtYXAgb2YgcHJvZHVjdF9pZCAtPiBwcmljZXNcbiAgICBjb25zdCBwcmljZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbiAgICBpZiAocHJpY2VzRGF0YSkge1xuICAgICAgKHByaWNlc0RhdGEgYXMgYW55W10pLmZvckVhY2gocHJpY2UgPT4ge1xuICAgICAgICBpZiAoIXByaWNlTWFwLmhhcyhwcmljZS5wcm9kdWN0X2lkKSkge1xuICAgICAgICAgIHByaWNlTWFwLnNldChwcmljZS5wcm9kdWN0X2lkLCBbXSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJpY2VNYXAuZ2V0KHByaWNlLnByb2R1Y3RfaWQpIS5wdXNoKHByaWNlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgdGhlIGRhdGEgdG8gZ2V0IGN1cnJlbnQgcHJpY2VzXG4gICAgY29uc3QgcHJvZHVjdHNXaXRoUHJpY2VzOiBQcm9kdWN0V2l0aFByaWNlW10gPSBkYXRhLm1hcCgocHJvZHVjdDogYW55KSA9PiB7XG4gICAgICAvLyBHZXQgcHJpY2VzIGZvciB0aGlzIHByb2R1Y3RcbiAgICAgIGNvbnN0IHByaWNlcyA9IHByaWNlTWFwLmdldChwcm9kdWN0LmlkKSB8fCBbXTtcbiAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICBcbiAgICAgIC8vIEZpbmQgdGhlIGN1cnJlbnQgdmFsaWQgcHJpY2UgKHZhbGlkX2Zyb20gPD0gbm93IEFORCAodmFsaWRfdG8gSVMgTlVMTCBPUiB2YWxpZF90byA+PSBub3cpKVxuICAgICAgY29uc3QgY3VycmVudFByaWNlID0gcHJpY2VzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBwcmljZXNcbiAgICAgICAgICAgIC5maWx0ZXIoKHByaWNlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgaWYgKCFwcmljZS52YWxpZF9mcm9tKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIGNvbnN0IHZhbGlkRnJvbSA9IG5ldyBEYXRlKHByaWNlLnZhbGlkX2Zyb20pO1xuICAgICAgICAgICAgICBjb25zdCB2YWxpZFRvID0gcHJpY2UudmFsaWRfdG8gPyBuZXcgRGF0ZShwcmljZS52YWxpZF90bykgOiBudWxsO1xuICAgICAgICAgICAgICByZXR1cm4gdmFsaWRGcm9tIDw9IG5vdyAmJiAoIXZhbGlkVG8gfHwgdmFsaWRUbyA+PSBub3cpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAvLyBTb3J0IGJ5IHZhbGlkX2Zyb20gZGVzY2VuZGluZyB0byBnZXQgdGhlIG1vc3QgcmVjZW50XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShiLnZhbGlkX2Zyb20pLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudmFsaWRfZnJvbSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgfSlbMF1cbiAgICAgICAgOiBudWxsO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcHJvZHVjdC5pZCxcbiAgICAgICAgbmFtZTogcHJvZHVjdC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogcHJvZHVjdC5kZXNjcmlwdGlvbixcbiAgICAgICAgcHJvZHVjdF90eXBlOiBwcm9kdWN0LnByb2R1Y3RfdHlwZSxcbiAgICAgICAgc3VwcGxpZXJfaWQ6IHByb2R1Y3Quc3VwcGxpZXJfaWQsXG4gICAgICAgIGltYWdlX3VybDogcHJvZHVjdC5pbWFnZV91cmwsXG4gICAgICAgIGFidjogcHJvZHVjdC5hYnYsXG4gICAgICAgIHZvbHVtZV9tbDogcHJvZHVjdC52b2x1bWVfbWwsXG4gICAgICAgIHN0b2NrX3F1YW50aXR5OiBwcm9kdWN0LnN0b2NrX3F1YW50aXR5LFxuICAgICAgICBhdmFpbGFiaWxpdHk6IHByb2R1Y3QuYXZhaWxhYmlsaXR5LFxuICAgICAgICBjcmVhdGVkX2F0OiBwcm9kdWN0LmNyZWF0ZWRfYXQsXG4gICAgICAgIHByaWNlOiBjdXJyZW50UHJpY2U/LnByaWNlIHx8IG51bGwsXG4gICAgICAgIGN1cnJlbmN5OiBjdXJyZW50UHJpY2U/LmN1cnJlbmN5IHx8ICdTRUsnLFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzZWQgJHtwcm9kdWN0c1dpdGhQcmljZXMubGVuZ3RofSBwcm9kdWN0cyB3aXRoIHByaWNlc2ApO1xuICAgIHJldHVybiBwcm9kdWN0c1dpdGhQcmljZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZmV0Y2hQcm9kdWN0czonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaCBhIHNpbmdsZSBwcm9kdWN0IGJ5IElEIHdpdGggY3VycmVudCBwcmljZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hQcm9kdWN0QnlJZChwcm9kdWN0SWQ6IHN0cmluZyk6IFByb21pc2U8UHJvZHVjdFdpdGhQcmljZSB8IG51bGw+IHtcbiAgLy8gRW5zdXJlIHdlJ3JlIGluIHRoZSBicm93c2VyIGVudmlyb25tZW50XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIGNvbnNvbGUuZXJyb3IoJ2ZldGNoUHJvZHVjdEJ5SWQgY2FuIG9ubHkgYmUgY2FsbGVkIGZyb20gY2xpZW50IGNvbXBvbmVudHMnKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICAqLFxuICAgICAgICBwcm9kdWN0X3ByaWNlcyAoXG4gICAgICAgICAgcHJpY2UsXG4gICAgICAgICAgY3VycmVuY3ksXG4gICAgICAgICAgdmFsaWRfZnJvbSxcbiAgICAgICAgICB2YWxpZF90b1xuICAgICAgICApXG4gICAgICBgKVxuICAgICAgLmVxKCdpZCcsIHByb2R1Y3RJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJvZHVjdDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHByb2R1Y3QgPSBkYXRhIGFzIFByb2R1Y3RXaXRoUHJpY2VzUmF3O1xuXG4gICAgLy8gR2V0IHRoZSBtb3N0IHJlY2VudCB2YWxpZCBwcmljZVxuICAgIGNvbnN0IHByaWNlcyA9IHByb2R1Y3QucHJvZHVjdF9wcmljZXMgfHwgW107XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBcbiAgICBjb25zdCBjdXJyZW50UHJpY2UgPSBwcmljZXNcbiAgICAgIC5maWx0ZXIoKHByaWNlKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkRnJvbSA9IG5ldyBEYXRlKHByaWNlLnZhbGlkX2Zyb20pO1xuICAgICAgICBjb25zdCB2YWxpZFRvID0gcHJpY2UudmFsaWRfdG8gPyBuZXcgRGF0ZShwcmljZS52YWxpZF90bykgOiBudWxsO1xuICAgICAgICByZXR1cm4gdmFsaWRGcm9tIDw9IG5vdyAmJiAoIXZhbGlkVG8gfHwgdmFsaWRUbyA+PSBub3cpO1xuICAgICAgfSlcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShiLnZhbGlkX2Zyb20pLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudmFsaWRfZnJvbSkuZ2V0VGltZSgpO1xuICAgICAgfSlbMF07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHByb2R1Y3QuaWQsXG4gICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsXG4gICAgICBkZXNjcmlwdGlvbjogcHJvZHVjdC5kZXNjcmlwdGlvbixcbiAgICAgIHByb2R1Y3RfdHlwZTogcHJvZHVjdC5wcm9kdWN0X3R5cGUsXG4gICAgICBzdXBwbGllcl9pZDogcHJvZHVjdC5zdXBwbGllcl9pZCxcbiAgICAgIGltYWdlX3VybDogcHJvZHVjdC5pbWFnZV91cmwsXG4gICAgICBhYnY6IHByb2R1Y3QuYWJ2LFxuICAgICAgdm9sdW1lX21sOiBwcm9kdWN0LnZvbHVtZV9tbCxcbiAgICAgIHN0b2NrX3F1YW50aXR5OiBwcm9kdWN0LnN0b2NrX3F1YW50aXR5LFxuICAgICAgYXZhaWxhYmlsaXR5OiBwcm9kdWN0LmF2YWlsYWJpbGl0eSxcbiAgICAgIGNyZWF0ZWRfYXQ6IHByb2R1Y3QuY3JlYXRlZF9hdCxcbiAgICAgIHByaWNlOiBjdXJyZW50UHJpY2U/LnByaWNlIHx8IG51bGwsXG4gICAgICBjdXJyZW5jeTogY3VycmVudFByaWNlPy5jdXJyZW5jeSB8fCAnU0VLJyxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGZldGNoUHJvZHVjdEJ5SWQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJmZXRjaFByb2R1Y3RzIiwicHJvZHVjdFR5cGUiLCJvbmx5QXZhaWxhYmxlIiwiY29uc29sZSIsImVycm9yIiwic3VwYWJhc2UiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImRhdGEiLCJvcmRlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJsZW5ndGgiLCJ3YXJuIiwibG9nIiwicHJvZHVjdElkcyIsIm1hcCIsInAiLCJpZCIsInByaWNlc0RhdGEiLCJpbiIsInByaWNlTWFwIiwiTWFwIiwiZm9yRWFjaCIsInByaWNlIiwiaGFzIiwicHJvZHVjdF9pZCIsInNldCIsImdldCIsInB1c2giLCJwcm9kdWN0c1dpdGhQcmljZXMiLCJwcm9kdWN0IiwicHJpY2VzIiwibm93IiwiRGF0ZSIsImN1cnJlbnRQcmljZSIsImZpbHRlciIsInZhbGlkX2Zyb20iLCJ2YWxpZEZyb20iLCJ2YWxpZFRvIiwidmFsaWRfdG8iLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwibmFtZSIsImRlc2NyaXB0aW9uIiwicHJvZHVjdF90eXBlIiwic3VwcGxpZXJfaWQiLCJpbWFnZV91cmwiLCJhYnYiLCJ2b2x1bWVfbWwiLCJzdG9ja19xdWFudGl0eSIsImF2YWlsYWJpbGl0eSIsImNyZWF0ZWRfYXQiLCJjdXJyZW5jeSIsImZldGNoUHJvZHVjdEJ5SWQiLCJwcm9kdWN0SWQiLCJzaW5nbGUiLCJwcm9kdWN0X3ByaWNlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/supabase/products.ts\n");

/***/ })

};
;